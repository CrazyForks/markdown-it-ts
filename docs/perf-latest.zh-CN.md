# 性能报告（最新一次）

| 字数 | S1 一次 | S2 一次 | S3 一次 | S4 一次 | S5 一次 | M1 一次 | S1 追加 | S2 追加 | S3 追加 | S4 追加 | S5 追加 | M1 追加 |
|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|
| 5000 | 6.46ms | 0.78ms | 0.92ms | 0.71ms | **0.41ms** | 5.20ms | 5.01ms | 1.22ms | **0.83ms** | 1.81ms | 2.04ms | 3.45ms |
| 20000 | 1.30ms | 1.92ms | 3.71ms | 3.24ms | **1.15ms** | 2.10ms | 6.07ms | **1.27ms** | 1.30ms | 10.24ms | 4.86ms | 4.68ms |
| 50000 | 3.65ms | 3.58ms | 3.69ms | 3.28ms | 2.66ms | **2.47ms** | 10.44ms | **2.92ms** | 5.64ms | 14.18ms | 11.52ms | 11.60ms |
| 100000 | **5.93ms** | 7.22ms | 7.02ms | 8.04ms | 6.01ms | 7.01ms | 21.92ms | 32.48ms | 20.96ms | 26.21ms | 21.89ms | **17.67ms** |

各规模下的最佳（一次性）：
- 5000: S5 0.41ms（流式 关闭, 纯全量）
- 20000: S5 1.15ms（流式 关闭, 纯全量）
- 50000: M1 2.47ms（markdown-it（基线））
- 100000: S1 5.93ms（流式 开启, 关闭缓存, 开启分块）

各规模下的最佳（追加工作负载）：
- 5000: S3 0.83ms（流式 开启, 开启缓存, 开启分块(混合)）
- 20000: S2 1.27ms（流式 开启, 开启缓存, 关闭分块）
- 50000: S2 2.92ms（流式 开启, 开启缓存, 关闭分块）
- 100000: M1 17.67ms（markdown-it（基线））

推荐（按不同规模的多数投票）：
- 一次性：S5(2)、M1(1)、S1(1)
- 追加编辑：S2(2)、S3(1)、M1(1)

说明：当使用同一个 env 对象时，S2/S3 的 `appendHits` 应为 5（每次追加都会命中快路径）。

## markdown-it-ts 最佳 vs markdown-it（基线）

| 字数 | TS 最佳（一次） | 基线（一次） | 一次比例 | TS 最佳（追加） | 基线（追加） | 追加比例 | TS 场景（一次/追加） |
|---:|---:|---:|---:|---:|---:|---:|:--|
| 5000 | 0.41ms | 5.20ms | 0.08x | 0.83ms | 3.45ms | 0.24x | S5/S3 |
| 20000 | 1.15ms | 2.10ms | 0.55x | 1.27ms | 4.68ms | 0.27x | S5/S2 |
| 50000 | 2.66ms | 2.47ms | 1.08x | 2.92ms | 11.60ms | 0.25x | S5/S2 |
| 100000 | 5.93ms | 7.01ms | 0.85x | 20.96ms | 17.67ms | 1.19x | S1/S3 |

- 一次比例 < 1.00 表示 markdown-it-ts（最佳一次）快于基线。
- 追加比例 < 1.00 表示流式缓存快路径的优势。